<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"-->
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=Edge"/>
<title></title>
	<!-- 전자인증 모듈 설정 //-->
	<link rel="stylesheet" type="text/css" href="/toolkit/unisignweb/rsrc/css/certcommon.css?v=1"/>
	<script type="text/javascript" src="/toolkit/unisignweb/js/unisignwebclient.js?v=1"></script>
	<script type="text/javascript" src="./UniSignWeb_Multi_Init_Nim.js?v=1"></script>
	<!-- 전자인증 모듈 설정 //-->
<script>
	function SignData() 
	{
		if (document.frm.plainText.value == "")
		{
			alert("서명할 원문이 없습니다.");
			return;
		}
		unisign.SignDataEx( document.frm.plainText.value, null,function(resultObject)
		{ 
			if ( null == resultObject || '' == resultObject )
			{
				unisign.GetLastError(
					function(errCode, errMsg) 
					{
						alert('Error code : ' + errCode + '\n\nError Msg : ' + errMsg); 
					}
				);
			} 
			else
			{
				document.frm.signedText.value = resultObject.signedData;
				alert(resultObject.certAttrs.subjectName);//인증서 이름
			}
		});
	}
	function Send()
	{
		if (document.frm.signedText.value == "")
		{
			alert("전자서명값이 없습니다.");
		}
		document.frm.method = "post";
		document.frm.action = "/ccc-sample-wstd/verifySignData.mrn";
		document.frm.submit();
	}
</script>
</head>
<body>
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
	<td height="37" bgcolor="#0099CC">
		 &nbsp;<font color="#FFFFFF"><b>[전자서명 페이지]</b></font>
	</td>
</tr>
</table>
<h3><font color="red"> hidden 처리 대상 : 원문, 전자서명값<br>
<br>
 브라우저사인+HDD+USB</font></h3>
<br>
 form 속성에 onsubmit="return false" 을 설정해야 함 <br>
<form name="frm" onsubmit="return false">
	<table cellpadding="0" cellspacing="0" width="100%" align="center">
	<tr>
		<td align="center">
			<br>
			<br>
			<br>
			 원문<br>
			<textarea name="plainText" rows="5" cols="40">test 123</textarea>
			<br>
			<input type="button" value="전자서명(인증서선택)" onclick="javascript:SignData();">
		</td>
		<td align="center">
			<br>
			<br>
			<br>
			 전자서명값<br>
			<textarea name="signedText" rows="5" cols="40"></textarea>
			<br>
			<input type=button value="전송(verifySignData.mrn)" onclick="Send();">
		</td>
	</tr>
	</table>
</form>
</body>
</html>